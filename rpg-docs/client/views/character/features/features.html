<template name="features">
	<div fit>
		<div class="scroll-y" fit>
			<div class="containers">
				<!--expertiseDice-->
				{{>resource name="expertiseDice" title="Expertise Dice" color="teal" char=this}}
				<!--ki-->
				{{>resource name="ki" title="Ki Points" color="teal" char=this}}
				<!--rages-->
				{{>resource name="rages" title="Rages" color="teal" char=this}}
				<!--sorceryPoints-->
				{{>resource name="sorceryPoints" title="Sorcery Points" color="teal" char=this}}
				<!--superiorityDice-->
				{{>resource name="superiorityDice" title="Superiority Dice" color="teal" char=this}}
				
				<!--Attacks-->
				<paper-shadow class="card container"  hero-id="main" {{detailHero}}>
					<div class="whiteTop" hero-id="toolbar" layout horizontal center {{detailHero}}>
						<div flex>
							<div class="containerName subhead">Attacks</div>
						</div>
						<!--<paper-icon-button class="black54" id="addAttackButton" icon="add"></paper-icon-button>-->
					</div>
					<div class="containerMain listPadded">
						{{#each attacks}}
							<div class="itemSlot">
								<paper-item class="white attack" hero-id="main" {{detailHero}}>
									<div layout horizontal class="fullwidth">
										<div class="headline rightPadded" layout horizontal center>
											{{evaluateSigned ../_id attackBonus}}
										</div>
										<div layout vertical flex>
											<div class="body2">
												{{name}}
											</div>
											<div>
												{{damageDice}}&nbsp;{{{evaluateSignedSpaced ../_id damageBonus}}}&nbsp;{{damageType}}
											</div>
											{{#if details}}
												<div class="caption">
													{{details}}
												</div>
											{{/if}}
										</div>
									</div>
								</paper-item>
							</div>
						{{/each}}
					</div>
				</paper-shadow>

				<!--Proficiencies-->
				<paper-shadow class="card container"  hero-id="main" {{detailHero "proficiencies"}}>
					<div id="proficiencies"
						 class="whiteTop"
						 layout horizontal center>
						<div class="containerName subhead">Proficiencies</div>
					</div>
					<div flex class="containerMain listPadded">
						{{#if weaponProfs.count}}
							<div class="list-subhead" layout horizontal center>Weapons</div>
						{{/if}}
						{{#each weaponProfs}}
							{{> proficiencyListItem}}
						{{/each}}
						{{#if armorProfs.count}}
							<div class="list-subhead" layout horizontal center>Armor</div>
						{{/if}}
						{{#each armorProfs}}
							{{> proficiencyListItem}}
						{{/each}}
						{{#if toolProfs.count}}
							<div class="list-subhead" layout horizontal center>Tools</div>
						{{/if}}
						{{#each toolProfs}}
							{{> proficiencyListItem}}
						{{/each}}
					</div>
				</paper-shadow>

				<!--features-->
				{{#each features}}
					<paper-shadow class="card container featureCard"  hero-id="main" {{detailHero}}>
						<div class="containerTop {{colorClass}}" hero-id="toolbar" layout horizontal center {{detailHero}}>
							<paper-ripple fit></paper-ripple>
							<div class="containerName subhead" hero-id="title" flex {{detailHero}}>{{name}}</div>
							{{#if hasUses}}<div class="subhead" style="margin-right: 8px">{{usesLeft}}/{{usesValue}}</div>{{/if}}
							<paper-ripple fit></paper-ripple>
							{{#if canEnable}}
								<core-tooltip label="Feature enabled" position="left">
									<paper-checkbox class="enabledCheckbox" checked={{enabled}}></paper-checkbox>
								</core-tooltip>
							{{/if}}
						</div>
						{{#if description}}<div flex class="containerMain body1 featureDescription">{{description}}</div>{{/if}}
						{{#if hasUses}}
							<div class="containerFoot" layout horizontal center end-justified>
								<paper-button class="useFeature" disabled={{noUsesLeft}}>Use</paper-button>
								<paper-button class="resetFeature" disabled={{usesFull}}>Reset</paper-button>
							</div>
						{{/if}}
					</paper-shadow>
				{{/each}}
			</div>
			<div class="fab-buffer"></div>
		</div>
		<paper-fab id="addFeature" 
				   class="floatyButton" 
				   icon="add" 
				   title="Add" 
				   role="button" 
				   tabindex="0" 
				   aria-label="Add" 
				   hero-id="main"></paper-fab>
	</div>
</template>

<template name="resource">
	{{#if char.attributeBase name}}
		<paper-shadow class="card container" hero-id="main" {{detailHero name char._id}} layout horizontal>
			<div class="containerLeft {{getColor}}" hero-id="toolbar" {{detailHero name char._id}} >
				<div class="resourceButtons">
					<paper-icon-button class="resourceUp" icon="arrow-drop-up" disabled={{cantIncrement}}></paper-icon-button>
					<paper-icon-button class="resourceDown" icon="arrow-drop-down" disabled={{cantDecrement}}></paper-icon-button>
				</div>
				<div class="resourceValue">{{char.attributeValue name}}</div>
				<!--<div class="resourceMax">{{char.attributeBase name}}</div>-->
			</div>
			<div class="containerRight clickable" flex relative horizontal layout center>
				{{title}}
				<paper-ripple fit></paper-ripple>
			</div>
		</paper-shadow>
	{{/if}}
</template>
