<template name="spells">
	<div fit>
		<div id="spells" class="scroll-y" fit>
			<div class="resourceCards" layout horizontal wrap>
				{{>resource name="level1SpellSlots" title="Level 1" char=this}}
				{{>resource name="level2SpellSlots" title="Level 2" char=this}}
				{{>resource name="level3SpellSlots" title="Level 3" char=this}}
				{{>resource name="level4SpellSlots" title="Level 4" char=this}}
				{{>resource name="level5SpellSlots" title="Level 5" char=this}}
				{{>resource name="level6SpellSlots" title="Level 6" char=this}}
				{{>resource name="level7SpellSlots" title="Level 7" char=this}}
				{{>resource name="level8SpellSlots" title="Level 8" char=this}}
				{{>resource name="level9SpellSlots" title="Level 9" char=this}}
				{{>gridPadding num="8" class="card container"}}
			</div>
			<div class="containers">
				{{#each spellLists}}
					<paper-shadow class="card container"  hero-id="main" {{detailHero}} style="order: {{order}};">
						<div class="containerTop {{colorClass}}" hero-id="toolbar" layout horizontal center {{detailHero}}>
							<div flex>
								<div class="containerName subhead">{{name}}</div>
								<div class="caption">
									{{#if saveDC}}
										Save DC: {{evaluate charId saveDC}}
										<div style="width: 16px; display: inline-block;"></div>
									{{/if}}
									{{#if attackBonus}}
										Attack Bonus: {{evaluateSigned charId attackBonus}}
									{{/if}}
								</div>
							</div>
							{{#if settings.showUnprepared}}
								{{#if maxPrepared}}<div class="subhead">{{numPrepared}} / {{evaluate charId maxPrepared}}</div>{{/if}}
								<paper-icon-button class="finishPrep" icon="done"></paper-icon-button>
							{{else}}
								<paper-icon-button class="prepSpells" icon="book"></paper-icon-button>
							{{/if}}
						</div>
						<div class="containerMain">
							{{#each levels}}
								{{#if spellCount .. ../../_id}}
									<div class="list-subhead" layout horizontal center>{{name}}</div>
								{{/if}}
								{{#each spells ../_id ../../_id}}
									{{#if showSpell ../../settings.showUnprepared}}
										<div class="itemSlot">
											<paper-item class="inventoryItem spell" hero-id="main" {{detailHero}} layout horizontal center>
												<core-icon icon="social:whatshot" style="color: {{hexColor color}};"></core-icon>
												<div flex layout vertical>
													<div>{{name}}</div>
													<div class="caption">
														{{school}} {{castingTime}}{{#if ritual}} (ritual){{/if}} - {{spellComponents}}
													</div>
												</div>
												{{#if ../../settings.showUnprepared}}
													<paper-checkbox class="preparedCheckbox" checked={{isPrepared}} disabled={{cantUnprepare}}></paper-checkbox>
												{{else}}
													<!--<paper-icon-button class="castButton" icon="send"></paper-icon-button>-->
												{{/if}}
											</paper-item>
										</div>
									{{/if}}
								{{/each}}
							{{/each}}
						</div>
					</paper-shadow>
				{{/each}}
			</div>
			<div class="fab-buffer"></div>
		</div>
	</div>
	<paper-fab-menu id="inventoryAddMenu" icon="add" closeIcon="close" duration="0.3">
		<paper-fab-menu-item id="addSpell" icon="note-add" color="#d23f31" tooltip="Spell"></paper-fab-menu-item>
		<paper-fab-menu-item id="addSpellList" icon="work" color="#d23f31" tooltip="Spell List"></paper-fab-menu-item>
	</paper-fab-menu>
</template>