<template name="layout">
	<core-drawer-panel>
		<core-header-panel drawer navigation flex mode="seamed" class="white">
			<div id="accountSummary">
				{{#if currentUser}}
					<div id="profileLink" style="text-decoration: underline; cursor: pointer;">
						{{profileLink}}
					</div>
				{{else}}
					<a href="/sign-in" style="color: white;">Sign in</a>
				{{/if}}
			</div>
			<div id="navPanel">
				<core-item id="homeNav" icon="home" label="Home"></core-item>
				{{> characterSideList}}
				<core-item id="feedback" icon="bug-report" label="Send Feedback"></core-item>
				<core-item id="changeLog" icon="list" label="Change Log"></core-item>
			</div>
		</core-header-panel>
		<core-animated-pages main 
							 navigation 
							 detail-pages 
							 transitions="hero-transition cross-fade"
							 selected={{globalDetailSelected}}>
			<section id="mainContentSection" class={{notSelected}}>
				<core-header-panel fit mode="seamed">
					{{> yield}}
				</core-header-panel>
				<div>
					<div id="fadeDummy" cross-fade></div>
				</div>
			</section>
			<section id="detailSection">
				<div id="detailScreenFiller">
					<div id="screenDim" cross-fade></div>
					<paper-shadow id="globalDetail" z="5" animated hero hero-id="main">
						{{#if globalDetailTemplate}}
							{{> UI.dynamic template=globalDetailTemplate data=globalDetailData}}
						{{/if}}
					</paper-shadow>
				</div>
			</section>
		</core-animated-pages>
	</core-drawer-panel>

	<paper-action-dialog global-dialog backdrop
						 transition="core-transition-center"
						 class="scrolling {{#if globalDialogFullOnMobile}}full-on-mobile{{/if}}"
						 heading={{globalDialogHeader}}
						 layered>
		{{#if globalDialogTemplate}}
			{{> UI.dynamic template=globalDialogTemplate data=globalDialogData}}
		{{/if}}
	</paper-action-dialog>

	<paper-toast global-toast duration="5000">
		{{#if globalToastTemplate}}
			{{> UI.dynamic template=globalToastTemplate data=globalToastData}}
		{{else}}
			<div>
				No Toast template defined
			</div>
		{{/if}}
	</paper-toast>
</template>